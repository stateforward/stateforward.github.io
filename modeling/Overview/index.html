
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../StateMachine/">
      
      
        <link rel="next" href="../Element/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Overview - StateForward</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stateforward.model--element-definition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="StateForward" class="md-header__button md-logo" aria-label="StateForward" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            StateForward
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="lime"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_3">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="StateForward" class="md-nav__button md-logo" aria-label="StateForward" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    StateForward
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    State Machine
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            State Machine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../state_machine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Elements
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Elements
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Behavior/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Behavior
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../CompositeState/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CompositeState
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../StateMachine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StateMachine
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modeling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Modeling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Overview
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--element-definition" class="md-nav__link">
    Element Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--instantiating-elements" class="md-nav__link">
    Instantiating Elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--association-definition" class="md-nav__link">
    Association Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--collection-overview" class="md-nav__link">
    Collection Overview
  </a>
  
    <nav class="md-nav" aria-label="Collection Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--usage-example" class="md-nav__link">
    Usage Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--model" class="md-nav__link">
    Model
  </a>
  
    <nav class="md-nav" aria-label="Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output_1" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--model-validator" class="md-nav__link">
    Model Validator
  </a>
  
    <nav class="md-nav" aria-label="Model Validator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-with-validator" class="md-nav__link">
    Example with Validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-with-validator-output" class="md-nav__link">
    Example With Validator Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--model-preprocessor" class="md-nav__link">
    Model Preprocessor
  </a>
  
    <nav class="md-nav" aria-label="Model Preprocessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-utilizing-preprocessor" class="md-nav__link">
    Example Utilizing Preprocessor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output_2" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--validator-mechanism" class="md-nav__link">
    Validator Mechanism
  </a>
  
    <nav class="md-nav" aria-label="Validator Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-usage" class="md-nav__link">
    Example Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output-explanation" class="md-nav__link">
    Output Explanation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--preprocessor-overview" class="md-nav__link">
    Preprocessor Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--interpreter" class="md-nav__link">
    Interpreter
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Element/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Element
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--element-definition" class="md-nav__link">
    Element Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--instantiating-elements" class="md-nav__link">
    Instantiating Elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--association-definition" class="md-nav__link">
    Association Definition
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--collection-overview" class="md-nav__link">
    Collection Overview
  </a>
  
    <nav class="md-nav" aria-label="Collection Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--usage-example" class="md-nav__link">
    Usage Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--model" class="md-nav__link">
    Model
  </a>
  
    <nav class="md-nav" aria-label="Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output_1" class="md-nav__link">
    Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--model-validator" class="md-nav__link">
    Model Validator
  </a>
  
    <nav class="md-nav" aria-label="Model Validator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-with-validator" class="md-nav__link">
    Example with Validator
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-with-validator-output" class="md-nav__link">
    Example With Validator Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--model-preprocessor" class="md-nav__link">
    Model Preprocessor
  </a>
  
    <nav class="md-nav" aria-label="Model Preprocessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-utilizing-preprocessor" class="md-nav__link">
    Example Utilizing Preprocessor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output_2" class="md-nav__link">
    Output
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--validator-mechanism" class="md-nav__link">
    Validator Mechanism
  </a>
  
    <nav class="md-nav" aria-label="Validator Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.model--example-usage" class="md-nav__link">
    Example Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.model--output-explanation" class="md-nav__link">
    Output Explanation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--preprocessor-overview" class="md-nav__link">
    Preprocessor Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stateforward.model--interpreter" class="md-nav__link">
    Interpreter
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Overview</h1>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">
  
      <p>The <a href="/modeling/element">Element</a> is the foundational class for all StateForward elements. It provides essential functionality for creating a tree structure and managing relationships.</p>
<p>In contrast to the <code>ast</code> module, the Element and its associated elements are classes rather than objects. This design choice is based on several reasons:</p>
<ol>
<li>The tree is constructed only once at the initiation of the Python process and remains static thereafter. This results in a one-time overhead, which becomes significant when we examine the <code>Model</code> element.</li>
<li>Elements can be customized through standard inheritance and polymorphism. This feature enables the development of unique elements that can enhance the capabilities of the <code>Element</code> class.</li>
<li>Elements are instantiated in the same manner as any other Python object.</li>
</ol>
<h3 id="stateforward.model--element-definition">Element Definition</h3>
<div class="admonition example">
<p class="admonition-title">Element Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="stateforward.model--code" name="stateforward.model--__tabbed_1" type="radio" /><input id="stateforward.model--output_3" name="stateforward.model--__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="stateforward.model--code">Code</label><label for="stateforward.model--output_3">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">stateforward</span> <span class="k">as</span> <span class="nn">sf</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>


<span class="k">class</span> <span class="nc">FamilyTreeElement</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Element</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">qualified_name</span><span class="si">}</span><span class="s2">.__new__&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">qualified_name</span><span class="si">}</span><span class="s2">.__init__&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">FamilyTreeElement</span><span class="p">):</span>
    <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">kids</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">FamilyTreeElement</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">Collection</span><span class="p">[</span><span class="n">FamilyTreeElement</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">FamilyTree</span><span class="p">(</span><span class="n">FamilyTreeElement</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">Family</span><span class="p">(</span><span class="n">FamilyTree</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Dad</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">40</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Mom</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jane&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">38</span><span class="p">):</span>
        <span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jack&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">15</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">Daughter</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jill&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">):</span>
            <span class="k">class</span> <span class="nc">Grandson</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jimmy&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">SonInLaw</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">):</span>
            <span class="k">pass</span>


<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">Family</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Family<span class="w"> </span>type<span class="o">[</span>FamilyTree<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x105882730
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Dad<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x10587feb0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x105882070
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Son<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x105880570
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1058812f0
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Grandson<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x105880c30
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1058819b0
</code></pre></div>
<p>The leading numbers in the output denote the hierarchical level of each element within the tree structure, which aids in deciphering the connections among elements.
Even upon instantiation, this hierarchical format is preserved.</p>
</div>
</div>
</div>
</div>
<h3 id="stateforward.model--instantiating-elements">Instantiating Elements</h3>
<div class="admonition example">
<p class="admonition-title">Element Instantiation Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="stateforward.model--element_examplepy" name="stateforward.model--__tabbed_2" type="radio" /><input id="stateforward.model--output_4" name="stateforward.model--__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="stateforward.model--element_examplepy">element_example.py</label><label for="stateforward.model--output_4">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">my_family</span> <span class="o">=</span> <span class="n">Family</span><span class="p">()</span>
<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_family</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_family</span><span class="o">.</span><span class="n">Dad</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>Family.__new__
Family.Dad.__new__
Family.Mom.__new__
Family.Mom.Son.__new__
Family.Mom.Daughter.__new__
Family.Mom.Daughter.Grandson.__new__
Family.Mom.SonInLaw.__new__
Family.Mom.__init__
Family.Mom.SonInLaw.__init__
Family.Mom.Daughter.__init__
Family.Mom.Daughter.Grandson.__init__
Family.Mom.Son.__init__
Family.Dad.__init__
Family.__init__
<span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Family<span class="w"> </span>object<span class="o">[</span>FamilyTree<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1011ea59
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Dad<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7cb9
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7cc9
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Son<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7cdd
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7ced
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Grandson<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7d05
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x101a7d11
&lt;__main__.Family.Dad<span class="w"> </span>object<span class="w"> </span>at<span class="w"> </span>0x101a7cb9&gt;
</code></pre></div>
</div>
</div>
</div>
</div>
<p>Print statements were added to <code>__new__</code> and <code>__init__</code> to demonstrate the order of instantiation and initialization of a tree of Elements.
This is done intentionally to ensure that all elements are instantiated before any of them are initialized making them safe to access or references inside the <code>__init__</code> method.
Additionally the owned elements that are declared in <code>Family</code> become object attributes of the <code>Family</code> instance. As you can see in the printed <code>my_family.Dad</code> statement output.</p>
<hr />
<h3 id="stateforward.model--association-definition">Association Definition</h3>
<p>An <code>Association</code> represents a relationship to an element that is already under ownership elsewhere in the object hierarchy. It acts as a reference that enables access to these elements without directly owning them, maintaining a clear structure of ownership and dependencies.</p>
<p>In Python, an <code>Association</code> is a specialized wrapper around <code>weakref.proxy</code>, which allows the referred objects to be accessible as long as they exist, without affecting their lifetime by creating strong reference counts that would prevent garbage collection.</p>
<p>For example, in the <code>Family</code> tree structure mentioned earlier, if the <code>Grandson</code> needs to be associated with both <code>Daughter</code> and <code>SonInLaw</code>, rather than duplicating the <code>Grandson</code> object or directly sharing ownership, an <code>Association</code> can be created from <code>SonInLaw</code> to the pre-existing <code>Grandson</code> element. This setup symbolizes the relationship without taking full ownership, thus keeping the <code>Grandson</code> within the sole ownership tree of <code>Daughter</code> but still accessible from <code>SonInLaw</code> through this lightweight relationship.</p>
<p>By utilizing an <code>Association</code>, you ensure the system's relational integrity without being entangled in complex webs of ownership that might lead to memory leaks or logical inconsistencies.</p>
<div class="admonition example">
<p class="admonition-title">Association Example</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="stateforward.model--code_1" name="stateforward.model--__tabbed_3" type="radio" /><input id="stateforward.model--output_5" name="stateforward.model--__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="stateforward.model--code_1">Code</label><label for="stateforward.model--output_5">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1"># ... same as above</span>
        <span class="k">class</span> <span class="nc">SonInLaw</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span> <span class="n">kids</span><span class="o">=</span><span class="n">Daughter</span><span class="o">.</span><span class="n">Grandson</span><span class="p">):</span>
            <span class="k">pass</span>


<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">Family</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Family<span class="w"> </span>type<span class="o">[</span>FamilyTree<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f0ab10
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Dad<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f08290
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f0a450
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Son<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f08950
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f096d0
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Grandson<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f09010
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f09d90
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw.kids<span class="w"> </span>type<span class="o">[</span>Association&lt;Family.Mom.Daughter.Grandson&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x106f09010
</code></pre></div>
</div>
</div>
</div>
</div>
<p>Inspecting the output reveals that <code>SonInLaw.kids</code> has been established as an <code>Association</code> pointing to <code>Daughter.Grandson</code>. It is noteworthy that this association references the grandson using the very same memory location, underscoring that it does not constitute a separate instance but a different access path to the same object.</p>
<p>Now, let's proceed to create another instance of the family tree to observe the effects of these relationships in practice.</p>
<div class="admonition example">
<p class="admonition-title">Element With Associations</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="stateforward.model--code_2" name="stateforward.model--__tabbed_4" type="radio" /><input id="stateforward.model--output_6" name="stateforward.model--__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="stateforward.model--code_2">Code</label><label for="stateforward.model--output_6">Output</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">my_family</span> <span class="o">=</span> <span class="n">Family</span><span class="p">()</span>
<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_family</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>Family.__new__
Family.Dad.__new__
Family.Mom.__new__
Family.Mom.Son.__new__
Family.Mom.Daughter.__new__
Family.Mom.Daughter.Grandson.__new__
Family.Mom.SonInLaw.__new__
Family.Mom.__init__
Family.Mom.SonInLaw.__init__
Family.Mom.Daughter.__init__
Family.Mom.Daughter.Grandson.__init__
Family.Mom.Son.__init__
Family.Dad.__init__
Family.__init__
<span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Family<span class="w"> </span>object<span class="o">[</span>FamilyTree<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d245
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Dad<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d899
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d8b9
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Son<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d8d1
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d8e1
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Grandson<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d8f9
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw<span class="w"> </span>object<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d905
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw.kids<span class="w"> </span>object<span class="o">[</span>Association&lt;Family.Mom.Daughter.Grandson&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x1010d8f9
</code></pre></div>
</div>
</div>
</div>
</div>
<p>Upon observation, we can discern that the <code>Association</code> has maintained its link to the same <code>Grandson</code> instance, as indicated by the identical memory address.</p>
<p>Additionally, the output highlights that the <code>Grandson</code> element is initialized only once, even though it's included in the family tree twiceâ€”once directly within <code>Daughter</code> and once as an associated reference in <code>SonInLaw</code>. It demonstrates the efficiency of <code>Associations</code> in managing relationships without redundant initializations, thus providing a single source of truth for shared objects within complex structures.</p>
<hr />
<h3 id="stateforward.model--collection-overview">Collection Overview</h3>
<p>A <code>Collection</code> is a fixed container designed to hold elements, which can be either directly owned entities or associations to other elements. Elements within a <code>Collection</code> are automatically mapped or instantiated at the time the <code>Collection</code> itself is instantiated, making the container's content predictable and consistent.</p>
<h5 id="stateforward.model--usage-example">Usage Example</h5>
<p>The following modification to the family tree example introduces a <code>GrandDaughter</code> under the <code>Mom.Daughter</code> class. Additionally, the <code>SonInLaw</code> class now includes a <code>Collection</code> named <code>kids</code> to hold both the <code>Grandson</code> and the <code>Granddaughter</code>.
<div class="highlight"><pre><span></span><code><span class="c1"># ... same as the original</span>
        <span class="k">class</span> <span class="nc">Daughter</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jill&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">):</span>
            <span class="k">class</span> <span class="nc">Grandson</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jimmy&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
                <span class="k">pass</span>

            <span class="k">class</span> <span class="nc">Granddaughter</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;Jenny&quot;</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="k">class</span> <span class="nc">SonInLaw</span><span class="p">(</span>
            <span class="n">Person</span><span class="p">,</span>
            <span class="n">first_name</span><span class="o">=</span><span class="s2">&quot;John&quot;</span><span class="p">,</span>
            <span class="n">age</span><span class="o">=</span><span class="mi">26</span><span class="p">,</span>
            <span class="n">kids</span><span class="o">=</span><span class="n">sf</span><span class="o">.</span><span class="n">collection</span><span class="p">(</span><span class="n">Daughter</span><span class="o">.</span><span class="n">Grandson</span><span class="p">,</span> <span class="n">Daughter</span><span class="o">.</span><span class="n">Granddaughter</span><span class="p">),</span>
        <span class="p">):</span>
            <span class="k">pass</span>


<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">Family</span><span class="p">)</span>
</code></pre></div>
In this scenario, the <code>SonInLaw</code> class reflects that <code>John</code> has two children: <code>Grandson</code> and <code>Granddaughter</code>. These children are grouped together using the <code>sf.collection()</code> method, signifying that <code>John</code>'s <code>kids</code> attribute is an immutable set of his children. When the <code>Family</code> instance is created, this <code>Collection</code> ensures that the <code>Grandson</code> and <code>Granddaughter</code> are both tied into the family structure within the context of the <code>SonInLaw</code> class.</p>
<h5 id="stateforward.model--output">Output</h5>
<p><div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Family<span class="w"> </span>type<span class="o">[</span>FamilyTree<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb8a40
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Dad<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb5440
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb8380
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Son<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb5b00
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb6f40
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Grandson<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb61c0
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.Daughter.Granddaughter<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb6880
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw<span class="w"> </span>type<span class="o">[</span>Person<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb7cc0
<span class="w">   </span><span class="m">3</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw.kids<span class="w"> </span>type<span class="o">[</span>Collection<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb7600
<span class="w">    </span><span class="m">4</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw.kids.0<span class="w"> </span>type<span class="o">[</span>Association&lt;Family.Mom.Daughter.Grandson&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb61c0
<span class="w">    </span><span class="m">4</span><span class="w"> </span>-&gt;<span class="w"> </span>Family.Mom.SonInLaw.kids.1<span class="w"> </span>type<span class="o">[</span>Association&lt;Family.Mom.Daughter.Granddaughter&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x120eb6880
</code></pre></div>
You can discern from this output that the <code>kids</code> attribute of the <code>SonInLaw</code> instance is now a <code>Collection</code>. Within this <code>Collection</code>, there are <code>Associations</code> to the <code>Grandson</code> and <code>Granddaughter</code>. Crucially, these associations preserve the original memory addresses of the grandchildren, as they should, confirming the <code>Collection</code> utilizes direct associations to existing instances rather than creating duplicate objects.</p>
<p>The output enumerates and maintains the hierarchical integrity and precise order of elements, as exhibited by the four-level deep printout where <code>SonInLaw.kids</code> consists of indexes (<code>.0</code> and <code>.1</code>) signifying individual positions within the <code>Collection</code>. This ensures each child's relational context within the family is clear and traceable.</p>
<h5 id="stateforward.model--example">Example</h5>
<p>instantiating the family again.
<div class="highlight"><pre><span></span><code><span class="n">my_family</span> <span class="o">=</span> <span class="n">Family</span><span class="p">()</span>
<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_family</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_family</span><span class="o">.</span><span class="n">Mom</span><span class="o">.</span><span class="n">SonInLaw</span><span class="o">.</span><span class="n">kids</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>#### Output
```bash
Family.__new__
Family.Dad.__new__
Family.Mom.__new__
Family.Mom.Son.__new__
Family.Mom.Daughter.__new__
Family.Mom.Daughter.Grandson.__new__
Family.Mom.Daughter.Granddaughter.__new__
Family.Mom.SonInLaw.__new__
Family.Mom.__init__
Family.Mom.SonInLaw.__init__
Family.Mom.Daughter.__init__
Family.Mom.Daughter.Granddaughter.__init__
Family.Mom.Daughter.Grandson.__init__
Family.Mom.Son.__init__
Family.Dad.__init__
Family.__init__
0 -&gt; Family object[FamilyTree] @ 0x102eaf7d
 1 -&gt; Family.Dad object[Person] @ 0x103f14e9
 1 -&gt; Family.Mom object[Person] @ 0x103f14f9
  2 -&gt; Family.Mom.Son object[Person] @ 0x103f1511
  2 -&gt; Family.Mom.Daughter object[Person] @ 0x103f1521
   3 -&gt; Family.Mom.Daughter.Grandson object[Person] @ 0x103f153d
   3 -&gt; Family.Mom.Daughter.Granddaughter object[Person] @ 0x103f154d
  2 -&gt; Family.Mom.SonInLaw object[Person] @ 0x103f1559
   3 -&gt; Family.Mom.SonInLaw.kids object[Collection] @ 0x103f155d
    4 -&gt; Family.Mom.SonInLaw.kids.0 object[Association&lt;Family.Mom.Daughter.Grandson&gt;] @ 0x103f153d
    4 -&gt; Family.Mom.SonInLaw.kids.1 object[Association&lt;Family.Mom.Daughter.Granddaughter&gt;] @ 0x103f154d
&lt;__main__.Family.Mom.Daughter.Grandson object at 0x103f153d&gt;
</code></pre></div></p>
<p>Just as anticipated from our previous discussion, the <code>Collection</code> within <code>SonInLaw.kids</code> endures as a reference to the <code>Grandson</code> and <code>Granddaughter</code>. It's worth observing that these associations are now presented as <code>objects</code> instead of <code>types</code>, reflecting the instantiated state of the elements. In this context, "instantiated state" suggests that instead of merely referring to the class blueprints (types), we're now handling actual, constructed instances of these elements, as represented by their memory addresses.</p>
<p>Moreover, the <code>Grandson</code> and <code>Granddaughter</code> are both initialized just once, despite being referenced mutiple times within the family tree, affirming the intelligent management of object creation and relationships through <code>Associations</code> and <code>Collections</code> in this family tree representation.</p>
<hr />
<h3 id="stateforward.model--model">Model</h3>
<p>The <code>Model</code> class is an enhancement of the <code>Element</code> that includes additional features for preprocessing, validation, and interpretation, providing a structured way to represent complex entities within a system. Each <code>Element</code> nested within a <code>Model</code> is provided with a <code>model</code> attribute, granting a reference to the root <code>Model</code> instance, which allows elements to be aware of their context within the larger entity.</p>
<h5 id="stateforward.model--example_1">Example</h5>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">stateforward</span> <span class="k">as</span> <span class="nn">sf</span>

<span class="k">class</span> <span class="nc">Automobile</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">wheels</span><span class="p">:</span> <span class="n">sf</span><span class="o">.</span><span class="n">Collection</span><span class="p">[</span><span class="s2">&quot;Wheel&quot;</span><span class="p">]</span>
    <span class="n">engine</span><span class="p">:</span> <span class="s2">&quot;Engine&quot;</span>

<span class="k">class</span> <span class="nc">Wheel</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Element</span><span class="p">):</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">class</span> <span class="nc">Engine</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Element</span><span class="p">):</span>
    <span class="n">power</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span>
    <span class="n">Automobile</span><span class="p">,</span>
    <span class="n">manufacturer</span><span class="o">=</span><span class="s2">&quot;Saturn&quot;</span><span class="p">,</span>
<span class="p">):</span>
    <span class="k">class</span> <span class="nc">V8</span><span class="p">(</span><span class="n">Engine</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">300</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">FrontLeft</span><span class="p">(</span><span class="n">Wheel</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">FrontRight</span><span class="p">(</span><span class="n">Wheel</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">RearLeft</span><span class="p">(</span><span class="n">Wheel</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">RearRight</span><span class="p">(</span><span class="n">Wheel</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">16</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="n">sf</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">Car</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Car</span><span class="o">.</span><span class="n">V8</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
</code></pre></div>
<h5 id="stateforward.model--output_1">Output</h5>
<p><div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Car<span class="w"> </span>type<span class="o">[</span>Automobile<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861f820
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.V8<span class="w"> </span>type<span class="o">[</span>Engine<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861d660
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.FrontLeft<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861dd20
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.FrontRight<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861e3e0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.RearLeft<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861eaa0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.RearRight<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11861f160
&lt;class<span class="w"> </span><span class="s1">&#39;__main__.Car&#39;</span>&gt;
</code></pre></div>
The output shows the structure of the <code>Car</code> as a <code>Model</code>, which is a concrete representation of an <code>Automobile</code>. The nested classes like <code>V8</code> and the individual wheels are displayed as <code>Element</code> types that are part of the <code>Car</code> model. It also exhibits that the <code>V8</code> class within <code>Car</code> understands it is part of the <code>Car</code> model via the <code>model</code> attribute.</p>
<p>The <code>Automobile</code> model specifies that <code>manufacturer</code>, <code>wheels</code>, and an <code>engine</code> are essential components. In the context of the example, it means that a valid <code>Car</code> must have these attributes defined. However, it's important to note that the presence and correctness of these parts are not automatically checked by the <code>Model</code> or <code>Element</code> classes â€” a dedicated <code>Validator</code> would be required to ensure that the <code>Car</code> model adheres to the defined rules and structure of an <code>Automobile</code>.</p>
<hr />
<h4 id="stateforward.model--model-validator">Model Validator</h4>
<p>The <code>Model</code> class facilitates the use of a validator which is executed once the <code>Model</code> is fully constructed. The validation occurs only once at runtime, after the entire model is built, ensuring that the instance complies with the predefined rules and requirements.</p>
<h5 id="stateforward.model--example-with-validator">Example with Validator</h5>
<p>Below is an excerpt showing the incorporation of an <code>AutomobileValidator</code> for an <code>Automobile</code> <code>Model</code>. The validator checks for the presence of essential components like <code>engine</code> and <code>wheels</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ... the rest of the example above</span>

<span class="k">class</span> <span class="nc">AutomobileValidator</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Validator</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">validate_automobile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">automobile</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Automobile&quot;</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">automobile</span><span class="o">.</span><span class="n">engine</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Automobile </span><span class="si">{</span><span class="n">automobile</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must have an engine&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">automobile</span><span class="o">.</span><span class="n">wheels</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Automobile </span><span class="si">{</span><span class="n">automobile</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> must have wheels&quot;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Automobile</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">AutomobileValidator</span><span class="p">()):</span>
<span class="c1"># ... the rest of the example</span>
</code></pre></div>
<h5 id="stateforward.model--example-with-validator-output">Example With Validator Output</h5>
<div class="highlight"><pre><span></span><code>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;car_model_example.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">26</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<span class="w">    </span>class<span class="w"> </span>Car<span class="o">(</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;model.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">33</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init_subclass__
<span class="w">    </span>cls.validator.validate<span class="o">(</span>cls<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;validator.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">35</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>validate
<span class="w">    </span>self.validate_element<span class="o">(</span>element<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;validator.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">26</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>validate_element
<span class="w">    </span>method<span class="o">(</span>element.type<span class="o">)</span>
<span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;car_model_example.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>validate_automobile
<span class="w">    </span>raise<span class="w"> </span>ValueError<span class="o">(</span>f<span class="s2">&quot;Automobile {automobile.name} must have an engine&quot;</span><span class="o">)</span>
ValueError:<span class="w"> </span>Automobile<span class="w"> </span>Car<span class="w"> </span>must<span class="w"> </span>have<span class="w"> </span>an<span class="w"> </span>engine
</code></pre></div>
<p>In this case, the validator indicates that the <code>Car</code> class or its derivatives must include both an <code>engine</code> and <code>wheels</code> to be considered valid. However, explicitly specifying these components for every car class can be cumbersome.</p>
<p>To address this, we can introduce preprocessors to the <code>Model</code>. Preprocessors can simplify the code by automatically inferring or setting default values for properties like <code>engine</code> and <code>wheels</code>, reducing verbosity and making the model definitions more efficient and less error-prone.</p>
<hr />
<h4 id="stateforward.model--model-preprocessor">Model Preprocessor</h4>
<p>Preprocessors are executed as part of the <code>Model</code> construction process, taking place after the entire <code>Model</code> has been built but ahead of the validation phase. They are useful for setting up or modifying <code>Model</code> attributes based on a specific logic before the model is validated for correctness.</p>
<h5 id="stateforward.model--example-utilizing-preprocessor">Example Utilizing Preprocessor</h5>
<p>This extension of the earlier example incorporates a <code>Preprocessor</code> for the <code>Automobile</code> <code>Model</code>, which dynamically assigns the <code>wheels</code> and <code>engine</code> attributes by inspecting the elements present in the model.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ... continuation from the Automobile validation example</span>

<span class="c1"># Define a Preprocessor class specific to the Automobile model</span>
<span class="k">class</span> <span class="nc">AutomobilePreprocessor</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Preprocessor</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">preprocess_automobile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Automobile&quot;</span><span class="p">]):</span>
        <span class="n">sf</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span>
            <span class="n">element</span><span class="p">,</span>
            <span class="s2">&quot;wheels&quot;</span><span class="p">,</span>
            <span class="n">sf</span><span class="o">.</span><span class="n">collection</span><span class="p">(</span>
                <span class="o">*</span><span class="n">sf</span><span class="o">.</span><span class="n">find_owned_elements</span><span class="p">(</span>
                    <span class="n">element</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_element</span><span class="p">:</span> <span class="n">sf</span><span class="o">.</span><span class="n">is_subtype</span><span class="p">(</span><span class="n">_element</span><span class="p">,</span> <span class="n">Wheel</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="n">sf</span><span class="o">.</span><span class="n">set_attribute</span><span class="p">(</span>
            <span class="n">element</span><span class="p">,</span>
            <span class="s2">&quot;engine&quot;</span><span class="p">,</span>
            <span class="n">sf</span><span class="o">.</span><span class="n">find_owned_element</span><span class="p">(</span>
                <span class="n">element</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">_element</span><span class="p">:</span> <span class="n">sf</span><span class="o">.</span><span class="n">is_subtype</span><span class="p">(</span><span class="n">_element</span><span class="p">,</span> <span class="n">Engine</span><span class="p">)</span>
            <span class="p">),</span>
        <span class="p">)</span>

<span class="c1"># Update the Automobile Model to leverage the Preprocessor and Validator</span>
<span class="k">class</span> <span class="nc">Automobile</span><span class="p">(</span>
    <span class="n">sf</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">AutomobileValidator</span><span class="p">(),</span> <span class="n">preprocessor</span><span class="o">=</span><span class="n">AutomobilePreprocessor</span><span class="p">()</span>
<span class="p">):</span>
<span class="c1"># ... the remaining code for the Automobile model etc.</span>
</code></pre></div>
<h5 id="stateforward.model--output_2">Output</h5>
<p><div class="highlight"><pre><span></span><code><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span>Car<span class="w"> </span>type<span class="o">[</span>Automobile<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d616af0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.V8<span class="w"> </span>type<span class="o">[</span>Engine<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d614930
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.FrontLeft<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d614ff0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.FrontRight<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d6156b0
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.RearLeft<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d615d70
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.RearRight<span class="w"> </span>type<span class="o">[</span>Wheel<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d616430
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.wheels<span class="w"> </span>type<span class="o">[</span>Collection<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d6171b0
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.wheels.0<span class="w"> </span>type<span class="o">[</span>Association&lt;Car.FrontLeft&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d614ff0
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.wheels.1<span class="w"> </span>type<span class="o">[</span>Association&lt;Car.FrontRight&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d6156b0
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.wheels.2<span class="w"> </span>type<span class="o">[</span>Association&lt;Car.RearLeft&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d615d70
<span class="w">  </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.wheels.3<span class="w"> </span>type<span class="o">[</span>Association&lt;Car.RearRight&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d616430
<span class="w"> </span><span class="m">1</span><span class="w"> </span>-&gt;<span class="w"> </span>Car.engine<span class="w"> </span>type<span class="o">[</span>Association&lt;Car.V8&gt;<span class="o">]</span><span class="w"> </span>@<span class="w"> </span>0x11d614930
</code></pre></div>
With the preprocessor's functionality, we've streamlined the <code>Model</code> definition process, making it less verbose and more maintainable without the need to explicitly declare <code>wheels</code> and <code>engine</code> for every <code>Automobile</code> subclass. This approach allows for easier extension and customization of the model by simply including the relevant subclass elements.</p>
<hr />
<h3 id="stateforward.model--validator-mechanism">Validator Mechanism</h3>
<p>The <code>Validator</code> in the context of the <code>Model</code> functions analogously to the <code>NodeVisitor</code> found in Pythonâ€™s abstract syntax tree (<code>ast</code>) module. It follows a set path to discover the appropriate validation method for a given element within the structure.</p>
<p>Hereâ€™s an outline of the search logic:</p>
<ol>
<li>Element names are normalized to lowercase and converted to snake_case.</li>
<li>The search attempts to find a method called <code>validate_{element.name}</code>.</li>
<li>If not found, it looks for <code>validate_{element.type.name}</code>, continuing the search up the inheritance chain until <code>validate_element</code> is found or a matching method is identified.</li>
<li>This search stops as soon as a validation method is discovered, and that method is executed.</li>
</ol>
<p>Further, if the <code>Element</code> derives from another <code>Element</code>, the base class validation methods must be explicitly called within the identified validation method; they are not called automatically.</p>
<h5 id="stateforward.model--example-usage">Example Usage</h5>
<p>In the example provided, different color elements are created along with a corresponding <code>Validator</code> class that contains specific validation methods.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">stateforward</span> <span class="k">as</span> <span class="nn">sf</span>

<span class="c1"># Define a Validator to handle ColorWheel and its elements</span>
<span class="k">class</span> <span class="nc">ColorWheelValidator</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Validator</span><span class="p">):</span>
    <span class="c1"># Validates a ColorWheel instance</span>
    <span class="k">def</span> <span class="nf">validate_color_wheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;ColorWheel&quot;</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;validate_color_wheel(</span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="c1"># Invokes validation for each owned element within ColorWheel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_owned_elements</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

    <span class="c1"># Validates an instance of Red, inheriting from Theme.Red</span>
    <span class="k">def</span> <span class="nf">validate_red</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Theme.Red&quot;</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;validate_red(Red)&quot;</span><span class="p">)</span>
        <span class="c1"># Calls validation for the Color base class with an indent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_color</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Validates an instance of Green</span>
    <span class="k">def</span> <span class="nf">validate_green</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Theme.Green&quot;</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;validate_green(Green)&quot;</span><span class="p">)</span>

    <span class="c1"># Validates any Color instance with an optional indent</span>
    <span class="k">def</span> <span class="nf">validate_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="s2">&quot;Color&quot;</span><span class="p">],</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">indent</span><span class="si">}</span><span class="s2">validate_color(</span><span class="si">{</span><span class="n">element</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

<span class="c1"># Define a generic Color Element</span>
<span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Element</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># Define a ColorWheel Model, which incorporates the Validator</span>
<span class="k">class</span> <span class="nc">ColorWheel</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">Model</span><span class="p">,</span> <span class="n">validator</span><span class="o">=</span><span class="n">ColorWheelValidator</span><span class="p">()):</span>
    <span class="k">pass</span>

<span class="c1"># Define a Theme Model that inherits from ColorWheel and includes color elements</span>
<span class="k">class</span> <span class="nc">Theme</span><span class="p">(</span><span class="n">ColorWheel</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Red</span><span class="p">(</span><span class="n">Color</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Green</span><span class="p">(</span><span class="n">Color</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">class</span> <span class="nc">Blue</span><span class="p">(</span><span class="n">Color</span><span class="p">):</span>
        <span class="k">pass</span>

<span class="c1"># The output will demonstrate the Validator searching for and executing</span>
<span class="c1"># validation rules for the Theme Model&#39;s color elements</span>
</code></pre></div>
<h5 id="stateforward.model--output-explanation">Output Explanation</h5>
<p>The console output should indicate that the Validator successfully navigates through the elements, invoking the corresponding validation methods:</p>
<div class="highlight"><pre><span></span><code>validate_color_wheel<span class="o">(</span>Theme<span class="o">)</span>
validate_red<span class="o">(</span>Red<span class="o">)</span>
<span class="w">  </span>validate_color<span class="o">(</span>Red<span class="o">)</span>
validate_green<span class="o">(</span>Green<span class="o">)</span>
validate_color<span class="o">(</span>Blue<span class="o">)</span>
</code></pre></div>
<p>In the bullet points, it is explained how each color's validation method is resolved, showcasing the Validator's logic:</p>
<ol>
<li>The <code>Blue</code> color is validated using <code>validate_color</code> directly, as there is no explicit <code>validate_blue</code> method available.</li>
<li><code>validate_color</code> is not called for the <code>Green</code> color because <code>validate_green</code> is already present and does not call <code>validate_color</code>.</li>
<li><code>validate_color</code> is invoked for the <code>Red</code> color due to an explicit call within <code>validate_red</code>.</li>
<li><code>validate_owned_elements</code> is used in the <code>ColorWheel</code> validator, ensuring that all owned elements (<code>Red</code>, <code>Green</code>, and <code>Blue</code>) get validated. This step is vital because element validation would not occur without it.</li>
</ol>
<p>By defining and structuring the Validator and validation methods correctly, developers can enforce specific validation rules tailored to their <code>Model</code> structure and ensure that all elements comply with the defined criteria.</p>
<p align="right">(<a href="#readme-top">back to top</a>)</p>

<hr />
<h3 id="stateforward.model--preprocessor-overview">Preprocessor Overview</h3>
<p>The preprocessor in the <code>stateforward</code> library operates identically to the <code>Validator</code>, with the key difference being the timing of its invocation. It is called before the validation phase, which allows it to modify or augment the <code>Model</code> structure prior to any checks for correctness. The primary role of the <code>Preprocessor</code> is to streamline the model construction process, adding convenience and reducing code verbosity, thus enhancing the clarity and maintainability of the model definitions.</p>
<p>The <code>Preprocessor</code> follows a search pattern similar to the <code>Validator</code> to determine the appropriate processing method for a given element:</p>
<ol>
<li>Element names are converted to lowercase and snake_case for standardization.</li>
<li>It seeks a method with the signature <code>preprocess_{element.name}</code>.</li>
<li>Failing that, it looks for <code>preprocess_{element.type.name}</code>, proceeding recursively up the inheritance hierarchy until either <code>preprocess_element</code> is found or a suitable method is located.</li>
<li>Once a preprocessing method is identified, the search concludes and that method is executed.</li>
</ol>
<p>Should an <code>Element</code> inherit from another <code>Element</code>, base preprocessing functions are not automatically invoked. They must be explicitly called within the identified preprocessing method.</p>
<p>While the preprocessor can perform a wide range of tasks, common uses include auto-filling attributes with default values, organizing collections of elements, and setting up links or associations between parts of the model. This enables developers to define elegant and concise models that automatically adjust to include necessary attributes or sub-elements, thus freeing them from repetitive boilerplate code.</p>
<p>The <code>Preprocessor</code> is a powerful tool within the <code>stateforward</code> library that aids in simplifying complex model preparation while ensuring a solid foundation for subsequent validation steps.</p>
<h3 id="stateforward.model--interpreter">Interpreter</h3>
<p>The <code>Interpreter</code> is an abstract class responsible for executing a <code>Model</code>.</p>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.top", "navigation.indexes", "navigation.expand", "search.highlight", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>