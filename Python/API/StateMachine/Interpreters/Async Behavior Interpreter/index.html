
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../Preprocessor/">
      
      
        <link rel="next" href="../Async%20Interpreter/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.8">
    
    
      
        <title>Async Behavior Interpreter - StateForward</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="StateForward" class="md-header__button md-logo" aria-label="StateForward" data-md-component="logo">
      
  <img src="../../../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            StateForward
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Async Behavior Interpreter
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="StateForward" class="md-nav__button md-logo" aria-label="StateForward" data-md-component="logo">
      
  <img src="../../../../../assets/logo.png" alt="logo">

    </a>
    StateForward
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_1" >
        
          
          <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_1">
            <span class="md-nav__icon md-icon"></span>
            Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Core/Decorators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decorators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Core/Elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Elements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Core/Functional/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functional
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modelling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Modelling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Association/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Association
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Collection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Decorators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decorators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Element/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Element
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Preprocessor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preprocessor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Modelling/Visitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Visitor
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Protocols
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3_3">
            <span class="md-nav__icon md-icon"></span>
            Protocols
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/Clock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/Future/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Future
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/Interpreter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interpreter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/Logger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../Protocols/Queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Queue
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    StateMachine
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_4">
            <span class="md-nav__icon md-icon"></span>
            StateMachine
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Clock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Elements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Elements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../Preprocessor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Preprocessor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3_4_5" id="__nav_2_3_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interpreters
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_4_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            Interpreters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Async Behavior Interpreter
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Async Behavior Interpreter
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter" class="md-nav__link">
    AsyncBehaviorInterpreter
  </a>
  
    <nav class="md-nav" aria-label="AsyncBehaviorInterpreter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_behavior" class="md-nav__link">
    exec_behavior()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_event_processing" class="md-nav__link">
    exec_event_processing()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.step" class="md-nav__link">
    step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Async%20Interpreter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async Interpreter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../Async%20StateMachine%20Interpreter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Async StateMachine Interpreter
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Examples/Complete%20StateMachine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Complete StateMachine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Examples/LightSwitch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LightSwitch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Examples/Microwave/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microwave
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Examples/TrafficLight/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TrafficLight
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter" class="md-nav__link">
    AsyncBehaviorInterpreter
  </a>
  
    <nav class="md-nav" aria-label="AsyncBehaviorInterpreter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_behavior" class="md-nav__link">
    exec_behavior()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_event_processing" class="md-nav__link">
    exec_event_processing()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.step" class="md-nav__link">
    step()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Async Behavior Interpreter</h1>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">
  
      <p>The <code>async_behavior_interpreter</code> module is designed to provide an asynchronous interpreter for state machines, specifically tailored for handling behaviors encoded into event-driven systems. It extends functionality from a base <code>AsyncInterpreter</code>, and is meant to work within a broader framework that manages state transitions and event processing called <code>stateforward</code>. This interpreter deals with asynchronous event queues and utilizes Python's <code>asyncio</code> library to manage concurrent execution of behaviors associated with state machine events.</p>
<p>The primary class provided by this module is <code>AsyncBehaviorInterpreter</code>, which inherits from the <code>AsyncInterpreter</code> class and introduces additional mechanisms to manage deferred events within the state machine's execution flow. Events are accumulated from various sources such as the internal model pool, an asynchronous queue, and a deferred list, ensuring that all events are processed in an ordered and non-repetitive fashion.</p>
<p>The <code>AsyncBehaviorInterpreter</code> class introduces two key asynchronous methods: <code>step</code> and <code>exec_event_processing</code>. The <code>step</code> method orchestrates the processing of events by maintaining a stack for event execution, processing events from the queue, checking for deferred events, and tirelessly fetching events until all have been handled. The <code>exec_event_processing</code> method, which is to be implemented, is responsible for handling the processing logic for each event encountered.</p>
<p>The <code>AsyncBehaviorInterpreter</code> also provides a synchronous method <code>compile</code> meant to be overridden by subclasses as a classmethod. This method's role is typically to compile or prepare the state machine for execution, though it is abstract in the context of the provided schema.</p>
<p>Additional utility methods such as <code>exec_behavior</code> facilitate the execution of behaviors associated with events, handling both synchronous and asynchronous operations seamlessly.</p>
<p>The module is robust in its logging capabilities, ensuring that event processing is transparent and debuggable. A <code>Logger</code> interface is expected for this purpose, and a default logger is created if none is provided upon instantiation of the interpreter.</p>
<p>The module leverages <code>asyncio</code> for handling concurrency and asynchronous operations, and incorporates custom abstractions such as <code>StateMachine</code>, <code>Clock</code>, <code>Queue</code>, and <code>Logger</code> provided by the <code>stateforward</code> framework. It is a key component within the framework for implementing asynchronous behavior-driven state machines.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter" class="doc doc-heading">
          <code>AsyncBehaviorInterpreter</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="stateforward.state_machine.interpreters.asynchronous.async_interpreter.AsyncInterpreter" href="../Async%20Interpreter/#stateforward.state_machine.interpreters.asynchronous.async_interpreter.AsyncInterpreter">AsyncInterpreter</a></code></p>

  
      <p>A class to interpret and manage asynchronous behaviors within an event-driven system. It utilizes a queue to process events and can defer processing of some events to a subsequent cycle.</p>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>deferred</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list to keep track of events that are deferred during processing.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>Inherits</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
        </tr>
        <tr>
          <td><code>AsyncInterpreter</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Base class that provides the asynchronous event interpretation framework.</p>
            </div>
          </td>
        </tr>
        <tr>
          <td><code>Clock</code></td>
          <td>
                <code>list[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>(Inherited via AsyncInterpreter) Represents a time-keeping component.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Methods:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
          <tr>
            <td><code>__init__</code></td>
            <td>
              <div class="doc-md-description">
                <p>Queue=None, log: Logger=None):
Initializes the AsyncBehaviorInterpreter instance.</p>
              </div>
            </td>
          </tr>
    </tbody>
  </table>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>queue</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.protocols.Queue" href="../../../Protocols/Queue/#stateforward.protocols.queue.Queue">Queue</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An asyncio Queue instance used to manage the event queue. Defaults to None, where an asyncio.Queue() will be created.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>log</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.protocols.logger.Logger" href="../../../Protocols/Logger/#stateforward.protocols.logger.Logger">Logger</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Logger instance for logging/debugging. Defaults to None, where a new logger is created based on the model's qualified name.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>step(self)</code></td>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Processes events in the queue, executing behaviors associated with each event and supporting deferral of events.
Events are deduplicated and processed in order until the queue is emptied or all events are deferred. Results are collected and any completions are handled.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>exec_behavior(self, behavior:
 core.Behavior, event: typing.Optional[core.Event]):
Executes the specified behavior with the associated event.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>behavior</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.core.Behavior" href="../../../Core/Elements/#stateforward.core.elements.Behavior">Behavior</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The behavior object to execute.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>event</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The event related to the behavior, if any.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>exec_event_processing(self, event:
 core.Event) -&gt; InterpreterStep:
Method stub for processing an individual event.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>event</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The event to be processed.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>InterpreterStep</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The outcome of processing the event, indicating if the event is complete, pending, or deferred.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

            <details class="quote">
              <summary>Source code in <code>stateforward/state_machine/interpreters/asynchronous/async_behavior_interpreter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">AsyncBehaviorInterpreter</span><span class="p">(</span><span class="n">AsyncInterpreter</span><span class="p">,</span> <span class="n">clock</span><span class="o">=</span><span class="n">Clock</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to interpret and manage asynchronous behaviors within an event-driven system. It utilizes a queue to process events and can defer processing of some events to a subsequent cycle.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        deferred (list[core.Event]):</span>
<span class="sd">             A list to keep track of events that are deferred during processing.</span>
<span class="sd">        Inherits:</span>
<span class="sd">        AsyncInterpreter:</span>
<span class="sd">             Base class that provides the asynchronous event interpretation framework.</span>
<span class="sd">        Clock:</span>
<span class="sd">             (Inherited via AsyncInterpreter) Represents a time-keeping component.</span>

<span class="sd">    Methods:</span>
<span class="sd">        __init__(self, queue:</span>
<span class="sd">             Queue=None, log: Logger=None):</span>
<span class="sd">            Initializes the AsyncBehaviorInterpreter instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        queue (Queue, optional):</span>
<span class="sd">             An asyncio Queue instance used to manage the event queue. Defaults to None, where an asyncio.Queue() will be created.</span>
<span class="sd">        log (Logger, optional):</span>
<span class="sd">             Logger instance for logging/debugging. Defaults to None, where a new logger is created based on the model&#39;s qualified name.</span>
<span class="sd">        step(self):</span>
<span class="sd">            Processes events in the queue, executing behaviors associated with each event and supporting deferral of events.</span>
<span class="sd">            Events are deduplicated and processed in order until the queue is emptied or all events are deferred. Results are collected and any completions are handled.</span>

<span class="sd">    Returns:</span>
<span class="sd">        exec_behavior(self, behavior:</span>
<span class="sd">             core.Behavior, event: typing.Optional[core.Event]):</span>
<span class="sd">            Executes the specified behavior with the associated event.</span>

<span class="sd">    Args:</span>
<span class="sd">        behavior (core.Behavior):</span>
<span class="sd">             The behavior object to execute.</span>
<span class="sd">        event (typing.Optional[core.Event]):</span>
<span class="sd">             The event related to the behavior, if any.</span>

<span class="sd">    Returns:</span>
<span class="sd">        exec_event_processing(self, event:</span>
<span class="sd">             core.Event) -&gt; InterpreterStep:</span>
<span class="sd">            Method stub for processing an individual event.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (core.Event):</span>
<span class="sd">             The event to be processed.</span>

<span class="sd">    Returns:</span>
<span class="sd">        InterpreterStep:</span>
<span class="sd">             The outcome of processing the event, indicating if the event is complete, pending, or deferred.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">deferred</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">core</span><span class="o">.</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">Queue</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="p">:</span> <span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        __init__(self, queue: Queue=None, log: Logger=None)</span>
<span class="sd">        Initializes a new instance of the enclosing class with optional queue and log parameters.</span>
<span class="sd">        This method sets up the class instance with a specified or default asynchronous queue and logging system. If no queue is provided, an asyncio Queue instance is created. If no logger is provided, a new logger is created based on the qualified name of the class instance via the create_logger function. The method also initializes a list to keep track of deferred tasks.</span>

<span class="sd">        Args:</span>
<span class="sd">            queue (Queue, optional):</span>
<span class="sd">                 An instance of a queue for task management. Defaults to None, in which case a new asyncio Queue is created.</span>
<span class="sd">            log (Logger, optional):</span>
<span class="sd">                 A logging instance to log messages and errors. Defaults to None, in which case a new logger is created based on the qualified name of the class instance.</span>

<span class="sd">        Attributes:</span>
<span class="sd">            deferred (List):</span>
<span class="sd">                 A list to store deferred tasks or activities that should be executed later.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">queue</span><span class="o">=</span><span class="n">queue</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">(),</span>
            <span class="n">log</span><span class="o">=</span><span class="n">log</span> <span class="ow">or</span> <span class="n">create_logger</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="bp">self</span><span class="p">)),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a single step in the event processing cycle of the current state machine asynchronously.</span>
<span class="sd">        This async method processes events that are pending in the machine&#39;s queue, handling each event according to the state machine&#39;s logic. During the step, it ensures that each event is either processed completely or deferred for later processing. The state machine evaluates events from its internal queue, deferred events from the previous step, and new events that arrive during the cycle. Duplicate events are filtered out, ensuring that each unique event is processed only once per iteration. Processed events are logged for debugging purposes, and any events that are determined to be owned by no one are stacked for result assignment. If an event signals the completion of the processing cycle, the method will clear the list of processed events and break out of the loop for the current step.</span>
<span class="sd">        The method uses an internal while loop that runs as long as there are events to process. Events that have already been processed are skipped in subsequent iterations. Once all events are processed, the loop will end, updating the deferred list with any events that were not processed and need to be revisited in the next step. The method concludes by setting the result for any futures in the stack that have been processed, thus completing the step.</span>

<span class="sd">        Note that this method should be used within the context of an async function or coroutine due to its asynchronous nature.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None:</span>
<span class="sd">                 This method does not return a value, as its purpose is to update the state machine&#39;s</span>
<span class="sd">                internal state based on event processing.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">deferred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">events</span> <span class="o">:=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="c1"># include active events in the event pool</span>
                    <span class="o">*</span><span class="p">(</span><span class="n">event</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">pool</span> <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">),</span>
                    <span class="c1"># include deferred events from the previous iteration</span>
                    <span class="o">*</span><span class="n">deferred</span><span class="p">,</span>
                    <span class="c1"># include events from the previous iteration</span>
                    <span class="o">*</span><span class="n">events</span><span class="p">,</span>
                    <span class="c1"># include events from the queue</span>
                    <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">qsize</span><span class="p">())),</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># reset deferred events</span>
            <span class="n">deferred</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># if all events have been processed this iteration is complete</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">event</span> <span class="ow">in</span> <span class="n">processed</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">):</span>
                <span class="c1"># clear the idle flag to prevent interruptions</span>
                <span class="k">while</span> <span class="n">events</span><span class="p">:</span>
                    <span class="c1"># pop the first event from the list</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">exec_event_processing</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="si">}</span><span class="s2"> results </span><span class="si">{</span><span class="n">results</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">processed</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="c1"># add the event to the list of processed events</span>
                    <span class="k">if</span> <span class="n">results</span> <span class="ow">is</span> <span class="n">InterpreterStep</span><span class="o">.</span><span class="n">deferred</span><span class="p">:</span>
                        <span class="n">deferred</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">owner_of</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">event</span><span class="p">),</span> <span class="n">results</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">results</span> <span class="ow">is</span> <span class="n">InterpreterStep</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
                            <span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
                            <span class="k">break</span>
                    <span class="n">processed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span> <span class="o">=</span> <span class="n">deferred</span>
        <span class="k">for</span> <span class="n">future</span><span class="p">,</span> <span class="n">results</span> <span class="ow">in</span> <span class="n">stack</span><span class="p">:</span>
            <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">exec_behavior</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">behavior</span><span class="p">:</span> <span class="n">core</span><span class="o">.</span><span class="n">Behavior</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">core</span><span class="o">.</span><span class="n">Event</span><span class="p">]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Asynchronously executes a behavior in response to an event.</span>
<span class="sd">        This function takes a behavior object and optionally an event object. It begins by logging the execution</span>
<span class="sd">        of the behavior using its qualified name. Afterwards, it executes the activity associated with the behavior,</span>
<span class="sd">        potentially waiting for the result if the activity is async (a future or coroutine). Finally, it returns the result of the behavior&#39;s activity.</span>

<span class="sd">        Args:</span>
<span class="sd">            behavior (core.Behavior):</span>
<span class="sd">                 The behavior object to execute.</span>
<span class="sd">            event (typing.Optional[core.Event]):</span>
<span class="sd">                 The event that triggers the execution of the behavior, if any.</span>

<span class="sd">        Returns:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">behavior_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="n">behavior</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing </span><span class="si">{</span><span class="n">behavior_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">behavior</span><span class="o">.</span><span class="n">activity</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">isfuture</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">exec_event_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">core</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InterpreterStep</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Processes a given event asynchronously within the system&#39;s event processing pipeline.</span>
<span class="sd">        This function serves as an asynchronous handler, tasked with interpreting and processing an event object. It forms an integral part of the event-driven architecture and is expected to be invoked with an event instance that it shall interpret, potentially yielding changes in system behavior or state as a result. Upon successful execution, it returns an instance of InterpreterStep, which encapsulates the outcome of processing the event.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (core.Event):</span>
<span class="sd">                 An event instance that contains data and information to be processed by the system.</span>

<span class="sd">        Returns:</span>
<span class="sd">            InterpreterStep:</span>
<span class="sd">                 An object representing the result of the event processing. It includes information about what actions should be taken next within the system based on the interpretation of the event.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception:</span>
<span class="sd">                 If the event processing fails or encounters an unexpected error, an exception may be thrown indicating the nature of the failure.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>This method sets up the class instance with a specified or default asynchronous queue and logging system. If no queue is provided, an asyncio Queue instance is created. If no logger is provided, a new logger is created based on the qualified name of the class instance via the create_logger function. The method also initializes a list to keep track of deferred tasks.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>queue</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.protocols.Queue" href="../../../Protocols/Queue/#stateforward.protocols.queue.Queue">Queue</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An instance of a queue for task management. Defaults to None, in which case a new asyncio Queue is created.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>log</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.protocols.logger.Logger" href="../../../Protocols/Logger/#stateforward.protocols.logger.Logger">Logger</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A logging instance to log messages and errors. Defaults to None, in which case a new logger is created based on the qualified name of the class instance.</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Attributes:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>deferred</code></td>
          <td>
                <code>List</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list to store deferred tasks or activities that should be executed later.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>stateforward/state_machine/interpreters/asynchronous/async_behavior_interpreter.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queue</span><span class="p">:</span> <span class="n">Queue</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">log</span><span class="p">:</span> <span class="n">Logger</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    __init__(self, queue: Queue=None, log: Logger=None)</span>
<span class="sd">    Initializes a new instance of the enclosing class with optional queue and log parameters.</span>
<span class="sd">    This method sets up the class instance with a specified or default asynchronous queue and logging system. If no queue is provided, an asyncio Queue instance is created. If no logger is provided, a new logger is created based on the qualified name of the class instance via the create_logger function. The method also initializes a list to keep track of deferred tasks.</span>

<span class="sd">    Args:</span>
<span class="sd">        queue (Queue, optional):</span>
<span class="sd">             An instance of a queue for task management. Defaults to None, in which case a new asyncio Queue is created.</span>
<span class="sd">        log (Logger, optional):</span>
<span class="sd">             A logging instance to log messages and errors. Defaults to None, in which case a new logger is created based on the qualified name of the class instance.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        deferred (List):</span>
<span class="sd">             A list to store deferred tasks or activities that should be executed later.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">queue</span><span class="o">=</span><span class="n">queue</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Queue</span><span class="p">(),</span>
        <span class="n">log</span><span class="o">=</span><span class="n">log</span> <span class="ow">or</span> <span class="n">create_logger</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="bp">self</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_behavior" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">exec_behavior</span><span class="p">(</span><span class="n">behavior</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Asynchronously executes a behavior in response to an event.
This function takes a behavior object and optionally an event object. It begins by logging the execution
of the behavior using its qualified name. Afterwards, it executes the activity associated with the behavior,
potentially waiting for the result if the activity is async (a future or coroutine). Finally, it returns the result of the behavior's activity.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>behavior</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.core.Behavior" href="../../../Core/Elements/#stateforward.core.elements.Behavior">Behavior</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The behavior object to execute.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>event</code></td>
          <td>
                <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The event that triggers the execution of the behavior, if any.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Returns:</p>

          <details class="quote">
            <summary>Source code in <code>stateforward/state_machine/interpreters/asynchronous/async_behavior_interpreter.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">exec_behavior</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">behavior</span><span class="p">:</span> <span class="n">core</span><span class="o">.</span><span class="n">Behavior</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">core</span><span class="o">.</span><span class="n">Event</span><span class="p">]</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Asynchronously executes a behavior in response to an event.</span>
<span class="sd">    This function takes a behavior object and optionally an event object. It begins by logging the execution</span>
<span class="sd">    of the behavior using its qualified name. Afterwards, it executes the activity associated with the behavior,</span>
<span class="sd">    potentially waiting for the result if the activity is async (a future or coroutine). Finally, it returns the result of the behavior&#39;s activity.</span>

<span class="sd">    Args:</span>
<span class="sd">        behavior (core.Behavior):</span>
<span class="sd">             The behavior object to execute.</span>
<span class="sd">        event (typing.Optional[core.Event]):</span>
<span class="sd">             The event that triggers the execution of the behavior, if any.</span>

<span class="sd">    Returns:</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">behavior_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="n">behavior</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing </span><span class="si">{</span><span class="n">behavior_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">behavior</span><span class="o">.</span><span class="n">activity</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">isfuture</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">iscoroutine</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="k">await</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.exec_event_processing" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">exec_event_processing</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Processes a given event asynchronously within the system's event processing pipeline.
This function serves as an asynchronous handler, tasked with interpreting and processing an event object. It forms an integral part of the event-driven architecture and is expected to be invoked with an event instance that it shall interpret, potentially yielding changes in system behavior or state as a result. Upon successful execution, it returns an instance of InterpreterStep, which encapsulates the outcome of processing the event.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>event</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.core.Event" href="../../../Core/Elements/#stateforward.core.elements.Event">Event</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An event instance that contains data and information to be processed by the system.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>InterpreterStep</code></td>          <td>
                <code><a class="autorefs autorefs-internal" title="stateforward.protocols.interpreter.InterpreterStep" href="../../../Protocols/Interpreter/#stateforward.protocols.interpreter.InterpreterStep">InterpreterStep</a></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An object representing the result of the event processing. It includes information about what actions should be taken next within the system based on the interpretation of the event.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Exception</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If the event processing fails or encounters an unexpected error, an exception may be thrown indicating the nature of the failure.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>stateforward/state_machine/interpreters/asynchronous/async_behavior_interpreter.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">exec_event_processing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">core</span><span class="o">.</span><span class="n">Event</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InterpreterStep</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Processes a given event asynchronously within the system&#39;s event processing pipeline.</span>
<span class="sd">    This function serves as an asynchronous handler, tasked with interpreting and processing an event object. It forms an integral part of the event-driven architecture and is expected to be invoked with an event instance that it shall interpret, potentially yielding changes in system behavior or state as a result. Upon successful execution, it returns an instance of InterpreterStep, which encapsulates the outcome of processing the event.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (core.Event):</span>
<span class="sd">             An event instance that contains data and information to be processed by the system.</span>

<span class="sd">    Returns:</span>
<span class="sd">        InterpreterStep:</span>
<span class="sd">             An object representing the result of the event processing. It includes information about what actions should be taken next within the system based on the interpretation of the event.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception:</span>
<span class="sd">             If the event processing fails or encounters an unexpected error, an exception may be thrown indicating the nature of the failure.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="stateforward.state_machine.interpreters.asynchronous.async_behavior_interpreter.AsyncBehaviorInterpreter.step" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">step</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Performs a single step in the event processing cycle of the current state machine asynchronously.
This async method processes events that are pending in the machine's queue, handling each event according to the state machine's logic. During the step, it ensures that each event is either processed completely or deferred for later processing. The state machine evaluates events from its internal queue, deferred events from the previous step, and new events that arrive during the cycle. Duplicate events are filtered out, ensuring that each unique event is processed only once per iteration. Processed events are logged for debugging purposes, and any events that are determined to be owned by no one are stacked for result assignment. If an event signals the completion of the processing cycle, the method will clear the list of processed events and break out of the loop for the current step.
The method uses an internal while loop that runs as long as there are events to process. Events that have already been processed are skipped in subsequent iterations. Once all events are processed, the loop will end, updating the deferred list with any events that were not processed and need to be revisited in the next step. The method concludes by setting the result for any futures in the stack that have been processed, thus completing the step.</p>
<p>Note that this method should be used within the context of an async function or coroutine due to its asynchronous nature.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>None</code></td>          <td>
          </td>
          <td>
            <div class="doc-md-description">
              <p>This method does not return a value, as its purpose is to update the state machine's
internal state based on event processing.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>stateforward/state_machine/interpreters/asynchronous/async_behavior_interpreter.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs a single step in the event processing cycle of the current state machine asynchronously.</span>
<span class="sd">    This async method processes events that are pending in the machine&#39;s queue, handling each event according to the state machine&#39;s logic. During the step, it ensures that each event is either processed completely or deferred for later processing. The state machine evaluates events from its internal queue, deferred events from the previous step, and new events that arrive during the cycle. Duplicate events are filtered out, ensuring that each unique event is processed only once per iteration. Processed events are logged for debugging purposes, and any events that are determined to be owned by no one are stacked for result assignment. If an event signals the completion of the processing cycle, the method will clear the list of processed events and break out of the loop for the current step.</span>
<span class="sd">    The method uses an internal while loop that runs as long as there are events to process. Events that have already been processed are skipped in subsequent iterations. Once all events are processed, the loop will end, updating the deferred list with any events that were not processed and need to be revisited in the next step. The method concludes by setting the result for any futures in the stack that have been processed, thus completing the step.</span>

<span class="sd">    Note that this method should be used within the context of an async function or coroutine due to its asynchronous nature.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None:</span>
<span class="sd">             This method does not return a value, as its purpose is to update the state machine&#39;s</span>
<span class="sd">            internal state based on event processing.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">events</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">deferred</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span>
    <span class="n">stack</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">events</span> <span class="o">:=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="c1"># include active events in the event pool</span>
                <span class="o">*</span><span class="p">(</span><span class="n">event</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">pool</span> <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stack</span><span class="p">),</span>
                <span class="c1"># include deferred events from the previous iteration</span>
                <span class="o">*</span><span class="n">deferred</span><span class="p">,</span>
                <span class="c1"># include events from the previous iteration</span>
                <span class="o">*</span><span class="n">events</span><span class="p">,</span>
                <span class="c1"># include events from the queue</span>
                <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">get_nowait</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="o">.</span><span class="n">qsize</span><span class="p">())),</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">):</span>
        <span class="c1"># reset deferred events</span>
        <span class="n">deferred</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># if all events have been processed this iteration is complete</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">event</span> <span class="ow">in</span> <span class="n">processed</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">):</span>
            <span class="c1"># clear the idle flag to prevent interruptions</span>
            <span class="k">while</span> <span class="n">events</span><span class="p">:</span>
                <span class="c1"># pop the first event from the list</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">exec_event_processing</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Processed </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">qualified_name_of</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="si">}</span><span class="s2"> results </span><span class="si">{</span><span class="n">results</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">processed</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="c1"># add the event to the list of processed events</span>
                <span class="k">if</span> <span class="n">results</span> <span class="ow">is</span> <span class="n">InterpreterStep</span><span class="o">.</span><span class="n">deferred</span><span class="p">:</span>
                    <span class="n">deferred</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">owner_of</span><span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">event</span><span class="p">),</span> <span class="n">results</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">results</span> <span class="ow">is</span> <span class="n">InterpreterStep</span><span class="o">.</span><span class="n">complete</span><span class="p">:</span>
                        <span class="n">processed</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">break</span>
                <span class="n">processed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">break</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">deferred</span> <span class="o">=</span> <span class="n">deferred</span>
    <span class="k">for</span> <span class="n">future</span><span class="p">,</span> <span class="n">results</span> <span class="ow">in</span> <span class="n">stack</span><span class="p">:</span>
        <span class="n">future</span><span class="o">.</span><span class="n">set_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.top", "navigation.indexes", "navigation.expand", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.81fa17fe.min.js"></script>
      
    
  </body>
</html>